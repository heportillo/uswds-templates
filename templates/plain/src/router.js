/* ========== PLAIN USWDS ROUTER ========== */
// USWDS CSS and JS are loaded in index.html
// Auto-generated router with all templates

class Router {
  constructor() {
    this.routes = {
      '/': '/templates/home.html',
      '/analytics/ab-testing': '/templates/analytics/ab-testing/index.html',
      '/analytics/business-intelligence': '/templates/analytics/business-intelligence/index.html',
      '/analytics/data-visualization': '/templates/analytics/data-visualization/index.html',
      '/analytics/metrics-tracker': '/templates/analytics/metrics-tracker/index.html',
      '/analytics/performance-analytics': '/templates/analytics/performance-analytics/index.html',
      '/analytics/reporting-engine': '/templates/analytics/reporting-engine/index.html',
      '/analytics/user-feedback': '/templates/analytics/user-feedback/index.html',
      '/analytics/web-analytics': '/templates/analytics/web-analytics/index.html',
      '/dashboards/agricultural-dashboard': '/templates/dashboards/agricultural-dashboard/index.html',
      '/dashboards/app-management': '/templates/dashboards/app-management/index.html',
      '/dashboards/benefits-overview': '/templates/dashboards/benefits-overview/index.html',
      '/dashboards/border-control': '/templates/dashboards/border-control/index.html',
      '/dashboards/business-owner': '/templates/dashboards/business-owner/index.html',
      '/dashboards/call-center': '/templates/dashboards/call-center/index.html',
      '/dashboards/case-management': '/templates/dashboards/case-management/index.html',
      '/dashboards/census-data': '/templates/dashboards/census-data/index.html',
      '/dashboards/citizen-portal': '/templates/dashboards/citizen-portal/index.html',
      '/dashboards/compliance-monitoring': '/templates/dashboards/compliance-monitoring/index.html',
      '/dashboards/content-management': '/templates/dashboards/content-management/index.html',
      '/dashboards/contractor-dashboard': '/templates/dashboards/contractor-dashboard/index.html',
      '/dashboards/crime-statistics': '/templates/dashboards/crime-statistics/index.html',
      '/dashboards/disaster-recovery': '/templates/dashboards/disaster-recovery/index.html',
      '/dashboards/economic-indicators': '/templates/dashboards/economic-indicators/index.html',
      '/dashboards/education-dashboard': '/templates/dashboards/education-dashboard/index.html',
      '/dashboards/election-monitoring': '/templates/dashboards/election-monitoring/index.html',
      '/dashboards/emergency-response': '/templates/dashboards/emergency-response/index.html',
      '/dashboards/energy-consumption': '/templates/dashboards/energy-consumption/index.html',
      '/dashboards/environmental-monitoring': '/templates/dashboards/environmental-monitoring/index.html',
      '/dashboards/facility-management': '/templates/dashboards/facility-management/index.html',
      '/dashboards/federal-analytics': '/templates/dashboards/federal-analytics/index.html',
      '/dashboards/fleet-management': '/templates/dashboards/fleet-management/index.html',
      '/dashboards/grant-management': '/templates/dashboards/grant-management/index.html',
      '/dashboards/healthcare-portal': '/templates/dashboards/healthcare-portal/index.html',
      '/dashboards/immigration-status': '/templates/dashboards/immigration-status/index.html',
      '/dashboards/inventory-management': '/templates/dashboards/inventory-management/index.html',
      '/dashboards/performance-metrics': '/templates/dashboards/performance-metrics/index.html',
      '/dashboards/procurement-dashboard': '/templates/dashboards/procurement-dashboard/index.html',
      '/dashboards/project-management': '/templates/dashboards/project-management/index.html',
      '/dashboards/public-health': '/templates/dashboards/public-health/index.html',
      '/dashboards/quality-assurance': '/templates/dashboards/quality-assurance/index.html',
      '/dashboards/research-metrics': '/templates/dashboards/research-metrics/index.html',
      '/dashboards/resource-allocation': '/templates/dashboards/resource-allocation/index.html',
      '/dashboards/security-operations': '/templates/dashboards/security-operations/index.html',
      '/dashboards/social-security': '/templates/dashboards/social-security/index.html',
      '/dashboards/system-admin': '/templates/dashboards/system-admin/index.html',
      '/dashboards/tax-dashboard': '/templates/dashboards/tax-dashboard/index.html',
      '/dashboards/tourism-analytics': '/templates/dashboards/tourism-analytics/index.html',
      '/dashboards/training-management': '/templates/dashboards/training-management/index.html',
      '/dashboards/transportation-analytics': '/templates/dashboards/transportation-analytics/index.html',
      '/dashboards/user-management': '/templates/dashboards/user-management/index.html',
      '/dashboards/veterans-affairs': '/templates/dashboards/veterans-affairs/index.html',
      '/data-displays/annual-report': '/templates/data-displays/annual-report/index.html',
      '/data-displays/batch-entry': '/templates/data-displays/batch-entry/index.html',
      '/data-displays/chart-dashboard': '/templates/data-displays/chart-dashboard/index.html',
      '/data-displays/comparison-table': '/templates/data-displays/comparison-table/index.html',
      '/data-displays/compliance-report': '/templates/data-displays/compliance-report/index.html',
      '/data-displays/data-export': '/templates/data-displays/data-export/index.html',
      '/data-displays/data-import': '/templates/data-displays/data-import/index.html',
      '/data-displays/data-lineage': '/templates/data-displays/data-lineage/index.html',
      '/data-displays/data-quality': '/templates/data-displays/data-quality/index.html',
      '/data-displays/executive-summary': '/templates/data-displays/executive-summary/index.html',
      '/data-displays/expandable-table': '/templates/data-displays/expandable-table/index.html',
      '/data-displays/financial-statement': '/templates/data-displays/financial-statement/index.html',
      '/data-displays/geographic-map': '/templates/data-displays/geographic-map/index.html',
      '/data-displays/inspection-checklist': '/templates/data-displays/inspection-checklist/index.html',
      '/data-displays/interactive-charts': '/templates/data-displays/interactive-charts/index.html',
      '/data-displays/inventory-count': '/templates/data-displays/inventory-count/index.html',
      '/data-displays/master-data': '/templates/data-displays/master-data/index.html',
      '/data-displays/network-diagram': '/templates/data-displays/network-diagram/index.html',
      '/data-displays/performance-report': '/templates/data-displays/performance-report/index.html',
      '/data-displays/pivot-table': '/templates/data-displays/pivot-table/index.html',
      '/data-displays/real-time-grid': '/templates/data-displays/real-time-grid/index.html',
      '/data-displays/realtime-grid': '/templates/data-displays/realtime-grid/index.html',
      '/data-displays/sortable-data-table': '/templates/data-displays/sortable-data-table/index.html',
      '/data-displays/sortable-table': '/templates/data-displays/sortable-table/index.html',
      '/data-displays/survey-collection': '/templates/data-displays/survey-collection/index.html',
      '/data-displays/time-entry': '/templates/data-displays/time-entry/index.html',
      '/data-displays/timeline-view': '/templates/data-displays/timeline-view/index.html',
      '/data-displays/tree-view': '/templates/data-displays/tree-view/index.html',
      '/forms/accommodation-request': '/templates/forms/accommodation-request/index.html',
      '/forms/appointment-scheduling': '/templates/forms/appointment-scheduling/index.html',
      '/forms/audit-response': '/templates/forms/audit-response/index.html',
      '/forms/benefits-application': '/templates/forms/benefits-application/index.html',
      '/forms/budget-proposal': '/templates/forms/budget-proposal/index.html',
      '/forms/building-permit': '/templates/forms/building-permit/index.html',
      '/forms/business-license': '/templates/forms/business-license/index.html',
      '/forms/certification-renewal': '/templates/forms/certification-renewal/index.html',
      '/forms/change-request': '/templates/forms/change-request/index.html',
      '/forms/clinical-services': '/templates/forms/clinical-services/index.html',
      '/forms/clinical-trial': '/templates/forms/clinical-trial/index.html',
      '/forms/complaint-submission': '/templates/forms/complaint-submission/index.html',
      '/forms/direct-deposit': '/templates/forms/direct-deposit/index.html',
      '/forms/disclosure-statement': '/templates/forms/disclosure-statement/index.html',
      '/forms/drivers-license': '/templates/forms/drivers-license/index.html',
      '/forms/drivers-license-renewal': '/templates/forms/drivers-license-renewal/index.html',
      '/forms/emergency-assistance': '/templates/forms/emergency-assistance/index.html',
      '/forms/environmental-assessment': '/templates/forms/environmental-assessment/index.html',
      '/forms/event-registration': '/templates/forms/event-registration/index.html',
      '/forms/exception-request': '/templates/forms/exception-request/index.html',
      '/forms/feedback-survey': '/templates/forms/feedback-survey/index.html',
      '/forms/financial-aid': '/templates/forms/financial-aid/index.html',
      '/forms/foia-request': '/templates/forms/foia-request/index.html',
      '/forms/grant-application': '/templates/forms/grant-application/index.html',
      '/forms/incident-report': '/templates/forms/incident-report/index.html',
      '/forms/insurance-claim': '/templates/forms/insurance-claim/index.html',
      '/forms/invoice-submission': '/templates/forms/invoice-submission/index.html',
      '/forms/it-support': '/templates/forms/it-support/index.html',
      '/forms/job-application': '/templates/forms/job-application/index.html',
      '/forms/loan-application': '/templates/forms/loan-application/index.html',
      '/forms/maintenance-request': '/templates/forms/maintenance-request/index.html',
      '/forms/membership-application': '/templates/forms/membership-application/index.html',
      '/forms/newsletter-subscription': '/templates/forms/newsletter-subscription/index.html',
      '/forms/passport-application': '/templates/forms/passport-application/index.html',
      '/forms/patent-application': '/templates/forms/patent-application/index.html',
      '/forms/payment-plan': '/templates/forms/payment-plan/index.html',
      '/forms/permit-request': '/templates/forms/permit-request/index.html',
      '/forms/privacy-assessment': '/templates/forms/privacy-assessment/index.html',
      '/forms/program-participation': '/templates/forms/program-participation/index.html',
      '/forms/records-request': '/templates/forms/records-request/index.html',
      '/forms/reimbursement': '/templates/forms/reimbursement/index.html',
      '/forms/research-participant': '/templates/forms/research-participant/index.html',
      '/forms/retirement-calculator': '/templates/forms/retirement-calculator/index.html',
      '/forms/risk-assessment': '/templates/forms/risk-assessment/index.html',
      '/forms/safety-inspection': '/templates/forms/safety-inspection/index.html',
      '/forms/school-enrollment': '/templates/forms/school-enrollment/index.html',
      '/forms/service-request': '/templates/forms/service-request/index.html',
      '/forms/tax-filing': '/templates/forms/tax-filing/index.html',
      '/forms/tax-filing-wizard': '/templates/forms/tax-filing-wizard/index.html',
      '/forms/training-enrollment': '/templates/forms/training-enrollment/index.html',
      '/forms/translation-request': '/templates/forms/translation-request/index.html',
      '/forms/vendor-registration': '/templates/forms/vendor-registration/index.html',
      '/forms/volunteer-registration': '/templates/forms/volunteer-registration/index.html',
      '/forms/voter-registration': '/templates/forms/voter-registration/index.html',
      '/landing/agency-home': '/templates/landing/agency-home/index.html',
      '/landing/benefits-program': '/templates/landing/benefits-program/index.html',
      '/landing/census-campaign': '/templates/landing/census-campaign/index.html',
      '/landing/city-government': '/templates/landing/city-government/index.html',
      '/landing/climate-action': '/templates/landing/climate-action/index.html',
      '/landing/county-services': '/templates/landing/county-services/index.html',
      '/landing/covid-info': '/templates/landing/covid-info/index.html',
      '/landing/digital-services': '/templates/landing/digital-services/index.html',
      '/landing/disaster-response': '/templates/landing/disaster-response/index.html',
      '/landing/economic-recovery': '/templates/landing/economic-recovery/index.html',
      '/landing/education-initiative': '/templates/landing/education-initiative/index.html',
      '/landing/emergency-services': '/templates/landing/emergency-services/index.html',
      '/landing/environmental-initiative': '/templates/landing/environmental-initiative/index.html',
      '/landing/federal-department': '/templates/landing/federal-department/index.html',
      '/landing/federal-homepage': '/templates/landing/federal-homepage/index.html',
      '/landing/healthcare-program': '/templates/landing/healthcare-program/index.html',
      '/landing/legal-aid': '/templates/landing/legal-aid/index.html',
      '/landing/library-services': '/templates/landing/library-services/index.html',
      '/landing/new-residents': '/templates/landing/new-residents/index.html',
      '/landing/parks-recreation': '/templates/landing/parks-recreation/index.html',
      '/landing/public-health': '/templates/landing/public-health/index.html',
      '/landing/public-health-campaign': '/templates/landing/public-health-campaign/index.html',
      '/landing/recruitment-campaign': '/templates/landing/recruitment-campaign/index.html',
      '/landing/regulatory-agency': '/templates/landing/regulatory-agency/index.html',
      '/landing/research-program': '/templates/landing/research-program/index.html',
      '/landing/safety-awareness': '/templates/landing/safety-awareness/index.html',
      '/landing/senior-services': '/templates/landing/senior-services/index.html',
      '/landing/small-business': '/templates/landing/small-business/index.html',
      '/landing/state-portal': '/templates/landing/state-portal/index.html',
      '/landing/tourist-info': '/templates/landing/tourist-info/index.html',
      '/landing/transportation-services': '/templates/landing/transportation-services/index.html',
      '/landing/veterans-portal': '/templates/landing/veterans-portal/index.html',
      '/landing/youth-programs': '/templates/landing/youth-programs/index.html',
      '/mobile/mobile-checklist': '/templates/mobile/mobile-checklist/index.html',
      '/mobile/mobile-dashboard': '/templates/mobile/mobile-dashboard/index.html',
      '/mobile/mobile-directory': '/templates/mobile/mobile-directory/index.html',
      '/mobile/mobile-form': '/templates/mobile/mobile-form/index.html',
      '/mobile/mobile-notifications': '/templates/mobile/mobile-notifications/index.html',
      '/mobile/mobile-profile': '/templates/mobile/mobile-profile/index.html',
      '/mobile/mobile-scanner': '/templates/mobile/mobile-scanner/index.html',
      '/mobile/mobile-search': '/templates/mobile/mobile-search/index.html',
      '/search/advanced-search': '/templates/search/advanced-search/index.html',
      '/search/api-catalog': '/templates/search/api-catalog/index.html',
      '/search/archive-search': '/templates/search/archive-search/index.html',
      '/search/benefits-checker': '/templates/search/benefits-checker/index.html',
      '/search/case-law': '/templates/search/case-law/index.html',
      '/search/cola-finder': '/templates/search/cola-finder/index.html',
      '/search/contract-search': '/templates/search/contract-search/index.html',
      '/search/data-browser': '/templates/search/data-browser/index.html',
      '/search/document-search': '/templates/search/document-search/index.html',
      '/search/legislative-search': '/templates/search/legislative-search/index.html',
      '/search/location-search': '/templates/search/location-search/index.html',
      '/search/media-library': '/templates/search/media-library/index.html',
      '/search/patent-search': '/templates/search/patent-search/index.html',
      '/search/people-finder': '/templates/search/people-finder/index.html',
      '/search/provider-directory': '/templates/search/provider-directory/index.html',
      '/search/public-records': '/templates/search/public-records/index.html',
      '/search/regulation-search': '/templates/search/regulation-search/index.html',
      '/search/research-repository': '/templates/search/research-repository/index.html',
      '/search/resource-discovery': '/templates/search/resource-discovery/index.html',
      '/search/search-results-grid': '/templates/search/search-results-grid/index.html',
      '/search/search-results-list': '/templates/search/search-results-list/index.html',
      '/security/access-control': '/templates/security/access-control/index.html',
      '/security/audit-log-viewer': '/templates/security/audit-log-viewer/index.html',
      '/security/compliance-monitor': '/templates/security/compliance-monitor/index.html',
      '/security/consent-management': '/templates/security/consent-management/index.html',
      '/security/incident-response': '/templates/security/incident-response/index.html',
      '/security/privacy-center': '/templates/security/privacy-center/index.html',
      '/security/security-dashboard': '/templates/security/security-dashboard/index.html',
      '/security/vulnerability-tracker': '/templates/security/vulnerability-tracker/index.html',
      '/user-management/access-request': '/templates/user-management/access-request/index.html',
      '/user-management/account-recovery': '/templates/user-management/account-recovery/index.html',
      '/user-management/account-settings': '/templates/user-management/account-settings/index.html',
      '/user-management/community-directory': '/templates/user-management/community-directory/index.html',
      '/user-management/contractor-directory': '/templates/user-management/contractor-directory/index.html',
      '/user-management/employee-directory': '/templates/user-management/employee-directory/index.html',
      '/user-management/expert-network': '/templates/user-management/expert-network/index.html',
      '/user-management/multi-factor-login': '/templates/user-management/multi-factor-login/index.html',
      '/user-management/password-reset': '/templates/user-management/password-reset/index.html',
      '/user-management/role-management': '/templates/user-management/role-management/index.html',
      '/user-management/session-management': '/templates/user-management/session-management/index.html',
      '/user-management/sso-portal': '/templates/user-management/sso-portal/index.html',
      '/user-management/stakeholder-registry': '/templates/user-management/stakeholder-registry/index.html',
      '/user-management/team-management': '/templates/user-management/team-management/index.html',
      '/user-management/user-profile': '/templates/user-management/user-profile/index.html',
      '/utility/404-error': '/templates/utility/404-error/index.html',
      '/utility/500-error': '/templates/utility/500-error/index.html',
      '/utility/accessibility': '/templates/utility/accessibility/index.html',
      '/utility/accessibility-statement': '/templates/utility/accessibility-statement/index.html',
      '/utility/api-docs': '/templates/utility/api-docs/index.html',
      '/utility/bug-report': '/templates/utility/bug-report/index.html',
      '/utility/cookie-consent': '/templates/utility/cookie-consent/index.html',
      '/utility/feedback-portal': '/templates/utility/feedback-portal/index.html',
      '/utility/foia-reading': '/templates/utility/foia-reading/index.html',
      '/utility/help-center': '/templates/utility/help-center/index.html',
      '/utility/maintenance-mode': '/templates/utility/maintenance-mode/index.html',
      '/utility/privacy-policy': '/templates/utility/privacy-policy/index.html',
      '/utility/release-notes': '/templates/utility/release-notes/index.html',
      '/utility/sitemap': '/templates/utility/sitemap/index.html',
      '/utility/system-status': '/templates/utility/system-status/index.html',
      '/utility/terms-service': '/templates/utility/terms-service/index.html',
      '/workflows/appointment-booking': '/templates/workflows/appointment-booking/index.html',
      '/workflows/benefits-enrollment': '/templates/workflows/benefits-enrollment/index.html',
      '/workflows/budget-planning': '/templates/workflows/budget-planning/index.html',
      '/workflows/business-registration': '/templates/workflows/business-registration/index.html',
      '/workflows/case-review': '/templates/workflows/case-review/index.html',
      '/workflows/contract-negotiation': '/templates/workflows/contract-negotiation/index.html',
      '/workflows/document-assembly': '/templates/workflows/document-assembly/index.html',
      '/workflows/event-platform': '/templates/workflows/event-platform/index.html',
      '/workflows/grant-review': '/templates/workflows/grant-review/index.html',
      '/workflows/immigration-wizard': '/templates/workflows/immigration-wizard/index.html',
      '/workflows/investigation-management': '/templates/workflows/investigation-management/index.html',
      '/workflows/permit-application': '/templates/workflows/permit-application/index.html',
      '/workflows/permit-wizard': '/templates/workflows/permit-wizard/index.html',
      '/workflows/procurement-evaluation': '/templates/workflows/procurement-evaluation/index.html',
      '/workflows/public-comment': '/templates/workflows/public-comment/index.html',
      '/workflows/queue-management': '/templates/workflows/queue-management/index.html',
      '/workflows/report-builder': '/templates/workflows/report-builder/index.html',
      '/workflows/resource-reservation': '/templates/workflows/resource-reservation/index.html',
      '/workflows/scheduling-coordinator': '/templates/workflows/scheduling-coordinator/index.html',
      '/workflows/tax-filing-wizard': '/templates/workflows/tax-filing-wizard/index.html',
      '/workflows/workflow-designer': '/templates/workflows/workflow-designer/index.html'
};
    
    this.init();
  }

  init() {
    // Load initial route
    this.loadRoute(this.getCurrentPath());
    
    // Handle browser navigation
    window.addEventListener('popstate', () => {
      this.loadRoute(this.getCurrentPath());
    });
  }

  getCurrentPath() {
    return window.location.pathname || '/';
  }

  async loadRoute(path) {
    const app = document.getElementById('app');
    const templatePath = this.routes[path];
    
    if (!templatePath) {
      app.innerHTML = this.get404Page();
      return;
    }
    
    try {
      const response = await fetch(templatePath);
      if (!response.ok) throw new Error('Template not found');
      
      const html = await response.text();
      app.innerHTML = html;
      
      // Re-initialize USWDS components
      if (window.USWDS) {
        window.USWDS.init();
      }
      
      // Setup code copy listener
      this.setupCodeListener();
    } catch (error) {
      app.innerHTML = this.getTemplatePlaceholder(path);
    }
  }

  setupCodeListener() {
    window.addEventListener('message', (e) => {
      if (e.data.action === 'getCode') {
        // Get the current template HTML
        const app = document.getElementById('app');
        const code = app.innerHTML;
        
        // Send it back to showcase
        e.source.postMessage({
          action: 'codeContent',
          code: code
        }, '*');
      }
    });
  }

  get404Page() {
    return `
      <div class="usa-section">
        <div class="grid-container">
          <h1 class="usa-heading">404 - Template Not Found</h1>
          <p class="usa-intro">The requested template does not exist.</p>
          <a href="/" class="usa-button">Return Home</a>
        </div>
      </div>
    `;
  }

  getTemplatePlaceholder(path) {
    return `
      <div class="usa-section">
        <div class="grid-container">
          <div class="usa-alert usa-alert--info">
            <div class="usa-alert__body">
              <h4 class="usa-alert__heading">Template Coming Soon</h4>
              <p class="usa-alert__text">
                The template for <strong>${path}</strong> will be created here.
              </p>
            </div>
          </div>
        </div>
      </div>
    `;
  }
}

// Initialize router
new Router();
